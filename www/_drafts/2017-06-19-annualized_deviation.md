---
layout: post
author: Alexander Myltsev
title: "Приведение месячных данных к годовым. Как избежать ошибки"
date: 2017-06-19 18:37:18 +0400
comments: true
tags: []
---

При составлении портфелей из активов мы используем аппарат математической статистики и теории вероятностей. Если
построить гистограмму дневных доходностей актива (например индекс ММВБ), то можно обнаружить "колокол" нормального
распределения. 

При работе с инвестиционными портфелями удобнее использовать месячные данные. Например, данные по инфляции
предоставляются раз в месяц, поэтому реальную доходность считают по месяцам. Еще один пример -- это работа с зарубежными
активами, приведёнными к доходности в рублях: финансовые дни отличаются в разных странах (например, из-за
праздничных дней), в то время как финансовые месяцы одинаковы по всему миру. При переходе дневные данные за каждый месяц
аппроксимируются отдельной с.в. -- по одной за каждый месяц.

В инвестициях возникает задача привести параметры с.в. для актива по месяцам к годовым значениям. Как же от параметров
нормального распределения по месяцам перейти к годовым параметрам? Из свойств линейности и произведения математических
ожиданий следует, что среднее значение от всех средних значений по месяцам аппроксимирует матожидание с.в. за год.
Верным ли будет аналогичный подход для дисперсий? Нет. Вдохновившись материалами статьи [Paul D. Kaplan "What’s Wrong
with Multiplying by the Square Root of
Twelve"](https://corporate.morningstar.com/US/documents/MethodologyDocuments/MethodologyPapers/SquareRootofTwelve.pdf)),
объясним почему.

# Почему умножение на √12 не работает

Предположим, что с.в. **Y** равна сумме независимых с.в. **Х<sub>1</sub>, Х<sub>2</sub>, …, Х<sub>12</sub>**:

![eq1](https://rostsber.ru/assets/images/publications/2016/08-aug/eq1.png)

[1]

Выписав по определению дисперсию с.в. **Y**, ввиду независимости **X<sub>i</sub>**, и приравняв все месячные с.в. к
**X<sub>i</sub>** можно показать, что стандартное отклонение **Y**, равное квадратному корню из дисперсии, равно
произведению √12 на стандартное отклонение **X**:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq2.png)

[2]

Пусть **Ra** -- это годовая доходность, и **R<sub>1</sub>, R<sub>2</sub>...R<sub>12</sub>** -- это ежемесячные доходности.
Годовая доходность -- это произведение месячных доходностей, вычисляемых по формуле [3].

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq3.png)

[3]

Если бы годовая доходность была **суммой** ежемесячных доходностей, умножение на √12 могло бы быть корректным методом
приведения стандартного отклонения к годовому значению. Но является произведением [3], поэтому такой способ приведения к
годовым значениям будет приводить к расхождениям с более корректым способом вычисления.

# Корректный способ вычисления

По определению стандартное отклонение:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq4.png)

[4]

Где **E** -- это математическое ожидание с.в.

Из свойств дисперсии следует, что добавление константы к случайной величине не изменяет её стандартного отклонения, и мы
можем применить формулу [4] к годовой доходности:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq5.png)

[5]

Ввиду свойства линейности матожидания, из [3] следует, что:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq6.png)

[6]

где **M<sub>m</sub>** это средняя месячная доходность. Аналогично получим:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq7.png)

[7]

Где **Q** для любого месяца **m** определяется как:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq.png)

Применяя формулу [4] к **1+R<sub>m</sub>**, и решая для **E[(1+R<sub>a</sub>)<sup>2</sup>]**, получим:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq8.png)

[8]

где S<sub>m</sub> -- это стандартное отклонение на месячных данных.

Совместо решая уравнения [5]-[8] относительно **Std[R<sub>A</sub>]**, получим корректную формулу приведения стандартного
отклонения ежемесячной доходности к соответствующему годовому значению:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq9.png)

[9]

Формула [9] было выведена Тобином (1965), применялась Леви и Гантхорпом (1993), и используется в течение многих лет
в [Ibbotson Associates](http://www.ibbotson.com/) и [Morningstar](http://www.morningstar.com/). Тем не
менее почему-то она не получила широкого распространения.

# Расхождение при умножении на √12

В этом разделе мы найдём расхождение значений двух методов. Не путайте с понятием "ошибки вычислений". В природе
статистические данные устроены значительно сложнее, чем с ними оперирует теория вероятности и матстатистика. Случайные
величины с их нормальными и другими распределениями -- лишь примерное приближение реально происходящих событий. Равно
как и параметры этих случайных (матожидание, дисперсия, и т.д.) Поэтому в случае двух примерных методов подчёта
параметра разброса (стандартного отклонения) мы будем говорить только об их расхождении. В английской литературе
используется термин "bias".

Формула [9] показывает, что для расчета годового стандартного отклонения доходности недостаточно знать только
ежемесячное стандартное отклонение. Мы должны также знать **ежемесячную среднюю доходность**. Следовательно, расхождение
от умножения на √12 является функцией как от средней месячной доходности, так и от стандартного отклонения.

Чтобы увидеть возможную степень погрешности, рассмотрим серию ежемесячных доходностей со стандартным отклонением 6%
(Многие фондовые индексы имеют долгосрочное ежемесячное стандартное отклонение приблизительно равное этому значению).
При умножении 6% на √12 стандартное отклонение годовой доходности составит 20,78%. На Графике 1 отображена зависимость
погрешности при умножении на √12 от средней ежемесячной доходности.

![](https://rostsber.ru/assets/images/publications/2016/08-aug/fig1.png)

Как показывает **График 1**, расхождение является наименьшим, когда средняя доходность равна нулю, - всего лишь 21
базисный пункт (-0,21%) при ежемесячном стандартное отклонении равном 6%. Тем не менее расхождение является очень
заметным для крайних значений средней доходности. Если средняя доходность сильно отрицательна, умножение на √12 приведет
к такому завышению волатильности, которое делает данные малопригодными. Если средняя доходность является крайне
положительной, расхождение будет сильно занижать волатильность.

Эти экстремальные расхождения при очень больших средних доходностях отражают асимметричный характер распределения
доходностей (логонормальное распределение). В то время как не существует теоретического верхнего предела по доходности,
доходность инвестиций без кредитного плеча не может упасть ниже минус 100%. Следовательно, если средняя доходность
является крайне негативной, большинство доходностей должны находиться в пределах от -100% до 0%, ограничивая количество
возможных вариантов. Тем не менее, если средняя доходность чрезвычайно положительна, доходности могут изменяться в очень
широком диапазоне.

# Альтернативные методы расчета волатильности доходности

Расхождение при умножении на √12, показанное выше, отражает фундаментальный недостаток измерения волатильности
доходности с использованием уровня доходности в течение определенного временного горизонта такого, как месяц (очевидно,
что с днями будет еще хуже). К счастью, этот недостаток можно легко решить с помощью **натурального логарифма
доходности**. Другими словами, для измерения волатильности **R<sub>m</sub>**, можно использовать стандартное отклонение
**ln(1+R<sub>m</sub>)**.

Применяя логарифмическое преобразование к уравнению [3] получим:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq10.png)

Обратите внимание на то, что теперь у нас есть сумма двенадцати одинаково распределенных случайных величин, так что
можно спокойно умножить на √12. Пусть **σ<sub>m</sub>** -- это стандартное отклонение ln(1+R<sub>m</sub>) ,
и **σ<sub>a-</sub>** это стандартное отклонение **ln(1+R<sub>a</sub>)**, тогда:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq11.png)

[11]

Получить данные **σ<sub>m</sub>** довольно несложно при наличии статистики месячной доходности. Но, даже если такой
статистики нет, а, предположим, известны только матожидание доходности и стандартное отклонение на месячных данных, то
можно получить **σ<sub>m</sub>** через значения **S<sub>m</sub>** и **M<sub>m</sub>** , а затем умножить на √12 для
приведения к годовому масштабу. Если доходности соответствуют логонормальному распределению, то расчетное стандартное
отклонение задается так:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq12.png)

[12]

Для получения приведенной к году величины остается только умножить месячные расчетные данные на √12 :

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq13.png)

[13]

На Графике 2 показаны среднемесячная доходность (M<sub>m</sub>) и расчетное логарифмическое стандартное отклонение в
годовом исчислении, при ежемесячном стандартном отклонении (S<sub>m</sub>) на уровне 6%. Этот график показывает, что
расчет волатильности этим способом довольно точен в широком диапазоне средних доходностей.

![](https://rostsber.ru/assets/images/publications/2016/08-aug/fig2.png)

# Выводы

Несмотря на математическую некорректность, наиболее распространенный способ приведения стандартного отклонения
ежемесячной доходности к годовой величине заключается в умножении на √12. Скорее всего, причина этого в представлении
о том, что распределение доходности является симметричным (нормальным). Тем не менее, распределение доходности является
внутренне асимметричным (логонормальным).

К счастью, есть правильная формула для приведения стандартного отклонения ежемесячной доходности к годовой величине.
Однако, для того чтобы использовать эту формулу, мы должны знать среднемесячную доходность, а также стандартное
отклонение. Результат может быть весьма чувствительным к средней ежемесячной доходности в связи с внутренним
асимметричным характером распределения доходностей.

Учитывая, что годовая доходность никак не является суммой, но произведением месячных показателей, то на практике удобно
использовать отклонение логарифма доходности. Тогда умножение на √12 работает.

Альтернативой измерения стандартного отклонения логарифмических доходностей напрямую является расчетный вариант через
значения **S<sub>m</sub>** и **M<sub>m</sub>**. (средняя доходность и стандартное отклонение доходностей). Умножение на
√12 также является правильным методом приведения такой статистики к годовым значениям. Погрешность при этом получается
минимальная.

_Файл в формате EXCEL, где приводятся все вышеуказанные расчеты и формулы, можно загрузить по ссылке ниже._
