---
layout: post
author: Alexander Myltsev
title: "Приведение месячных данных к годовым. Как избежать ошибки"
date: 2017-06-19 18:37:18 +0400
comments: true
tags: []
---

У людей, занимающихся распределением активов, при составлении портфелей часто возникает сложность, если не сказать
проблема. Глубина истории современных фондов, особенно у нас в России, часто измеряется годами, а не десятилетиями, как
хотелось бы. Поэтому чаще всего приходится пользоваться месячной статистикой для снижения погрешности в расчетах. Тут
все понятно, чем больше данных, тем достовернее статистика. Начинающие часто даже спрашивают - а не попользоваться ли
дневными данными? Ведь тогда погрешность будет еще меньше. Казалось бы, да... но не так все просто. Результат расчетов
(риск и доходность) мы тоже получили бы в масштабе одного дня. А какую ценность это будет иметь? Ведь нам в итоге нужны
параметры портфеля, приведенные к году. Вот тут и начинаются «танцы с бубном», появляются первые ошибки.

Переходя, от одного временного масштаба к другому, мы не можем просто умножать на 12 (для месяцев) или на 365 (в случае
года). Если с доходностью еще как-то понятно. Достаточно «прикинуть» капитализацию за годовой период, то с риском, как
это всегда бывает в портфелях, надо быть намного более осторожным. Первый вывод очень простой – **переход от месячных
данных к годовым дает меньшую погрешность чем от дневных**, каким бы методом мы не пользовались.

Когда-то мы были удивлены количеством наших коллег (в России и за границей), которые используют для перехода от
месячного стандартного отклонения к году метод умножения на √12\. В итоге риск (как стандартное отклонение) изменяется
на √12\. В этом материале мы хотели бы объяснить, почему это неправильно.

Кроме того, мы покажем, как рассчитать погрешность при использовании умножения на √12\. И, наконец, представим два
альтернативных метода расчета отклонения доходности, в которых умножение на √12 это правильный путь приведения
ежемесячных значений к годовому значению.

Статья написана на основе материала _Paul D. Kaplan “What’s Wrong with Multiplying by the Square Root of Twelve”_
([www.morningstar.com](http://www.morningstar.com)).

* * *

# Почему умножение на √12 не работает

Предположим, что **Y** это сумма независимых и равномерно распределённых случайных величин **Х<sub>1</sub>,
Х<sub>2</sub>, …, Х<sub>12</sub>**:

![eq1](https://rostsber.ru/assets/images/publications/2016/08-aug/eq1.png)

[1]

Считается очевидным и общеизвестным, что стандартное отклонение **Y** это просто √12 умноженный на стандартное
отклонение **X**:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq2.png)

[2]

Таким образом, если бы годовая доходность была **суммой** ежемесячных доходностей, умножение на √12 могло бы быть
корректным методом приведения стандартного отклонения к годовому значению. Однако, годовая доходность - это не сумма
ежемесячных доходностей, а скорее результат их произведения. Пусть **Ra** это годовая доходность, и
**R<sub>1</sub>,R<sub>2</sub>...R<sub>12</sub>** это составляющие её ежемесячные доходности. Зависимость между ними
будет следующая:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq3.png)

[3]

Так как это не сумма, то должно быть очевидным, что умножение на √12  не может быть корректным.

# Корректная формула

К счастью, есть правильный способ приведения стандартного отклонения ежемесячной доходности к годовому значению, который
может быть легко выведен. Первый шаг – это отметить, что стандартное отклонение любой случайной величины Х может быть
записано следующим образом:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq4.png)

[4]

Где **E** - это математическое ожидание. Если кто-то забыл про это свойство стандартного отклониения, то можно
посмотреть подробности в [Wiki](https://en.wikipedia.org/wiki/Standard_deviation).

Добавление константы к случайной величине не изменяет её стандартного отклонения, и мы можем применить формулу [4] к
годовой доходности следующим образом:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq5.png)

[5]

Поскольку математическое ожидание равномерно-распределённой случайной величины -  это произведение их матожиданий, из
выражения [3] следует:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq6.png)

[6]

где **M<sub>m</sub>** это средняя месячная доходность. Аналогично мы получаем:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq7.png)

[7]

Где **Q** для любого месяца **m** определяется как:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq.png)

Применяя формулу [4] к 1+R<sub>m</sub> , и решая для E[(1+R<sub>a</sub>)<sup>2</sup>], получим:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq8.png)

[8]

где S<sub>m</sub> это стандартное отклонение на месячных данных.

Совместив формулы [5]-[8], мы сможем вывести корректную формулу приведения стандартного отклонения ежемесячной
доходности к годовому значению:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq9.png)

[9]

Формула [9] было выведена Тобином (1965), применялась Леви и Гантхорпом (1993), и используется в течение многих лет
в [Ibbotson Associates](http://morningstarinvestments.com.au/) и [Morningstar](http://www.morningstar.com/). Тем не
менее почему-то она не получила широкого распространения.

# Погрешность при умножении на √12

Примечательной особенностью формулы [9] является то, что она показывает, что для расчета годового стандартного
отклонения доходности не достаточно знать только ежемесячное стандартное отклонение. Мы должны также знать **ежемесячную
среднюю доходность**. Следовательно, погрешность от умножения на √12 является функцией как от средней месячной
доходности, так и от стандартного отклонения.

Чтобы увидеть возможную степень погрешности, рассмотрим серию ежемесячных доходностей со стандартным отклонением 6%
(Многие фондовые индексы имеют долгосрочное ежемесячное стандартное отклонение приблизительно равное этому значению).
При умножении 6% на √12 стандартное отклонение годовой доходности составит 20,78%. На Графике 1 отображена зависимость
погрешности при умножении на √12 от средней ежемесячной доходности.

![](https://rostsber.ru/assets/images/publications/2016/08-aug/fig1.png)

Как показывает **График 1**, погрешность является наименьшей, когда средняя доходность равна нулю, - всего лишь 21
базисный пункт (-0,21%) при ежемесячном стандартное отклонении, равном 6%. Тем не менее погрешность является очень
заметной для крайних значений средней доходности. Если средняя доходность сильно отрицательна, умножение на √12 приведет
к такому завышению волатильности, которое делает данные малопригодными. Если средняя доходность является крайне
положительной, погрешность будет сильно занижать волатильность.

Эти экстремальные погрешности при очень больших средних доходностях отражают асимметричный характер распределения
доходностей (логонормальное распределение). В то время как не существует теоретического верхнего предела по доходности,
доходность инвестиций без кредитного плеча не может упасть ниже минус 100%. Следовательно, если средняя доходность
является крайне негативной, большинство доходностей должны находиться в пределах от -100% до 0%, ограничивая количество
возможных вариантов. Тем не менее, если средняя доходность чрезвычайно положительна, доходности могут изменяться в очень
широком диапазоне.

# Альтернативные методы расчета волатильности доходности

Погрешность при умножении на √12, показанная выше, отражает фундаментальный недостаток измерения волатильности
доходности с использованием уровня доходности в течение определенного временного горизонта, такого, как месяц (очевидно,
что с днями будет еще хуже). К счастью, этот недостаток можно легко решить с помощью **натурального логарифма
доходности**. Другими словами, для измерения волатильности **R<sub>m</sub>**, можно использовать стандартное отклонение
**ln(1+R<sub>m</sub>)**.

Применяя логарифмическое преобразование к уравнению [3,] получим:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq10.png)

Обратите внимание на то, что теперь у нас есть сумма двенадцати равномерно-распределенных случайных величин, так что
можно спокойно умножить на √12 . Пусть **σ<sub>m</sub>** - это стандартное отклонение ln(1+R<sub>m</sub>) ,
и **σ<sub>a- </sub>** это стандартное отклонение ln(1+R<sub>a</sub>), тогда:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq11.png)

[11]

Получить данные **σ<sub>m</sub>** довольно несложно при наличии статистики месячной доходности. Но, даже если такой
статистики нет, а, предположим, известны только матожидание доходности и стандартное отклонение на месячных данных, то
можно получить **σ<sub>m</sub>** через значения **S<sub>m</sub>** и **M<sub>m</sub>** , а затем умножить на √12 для
приведения к годовому масштабу. Если доходности соответствуют логонормальному распределению, то расчетное стандартное
отклонение  задается так:

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq12.png)

[12]

Для получения приведенной к году величины остается только умножить месячные расчетные данные на √12 :

![](https://rostsber.ru/assets/images/publications/2016/08-aug/eq13.png)

[13]

На Графике 2 показаны среднемесячная доходность (M<sub>m</sub>) и расчетное логарифмическое стандартное отклонение в
годовом исчислении, при ежемесячном стандартном отклонении (S<sub>m</sub>) на уровне 6%. Этот график показывает, что
расчет волатильности этим способом довольно точен в широком диапазоне средних доходностей.

![](https://rostsber.ru/assets/images/publications/2016/08-aug/fig2.png)

# Выводы

Не смотря на математическую некорректность, наиболее распространенный способ приведения стандартного отклонения
ежемесячной доходности к годовой величине заключается в умножении на √12\. Скорее всего, причина этого - в представлении
о том, что распределение доходности является симметричным (нормальным). Тем не менее, распределение доходности является
внутренне асимметричным (логонормальным).

К счастью, есть правильная формула для приведения стандартного отклонения ежемесячной доходности к годовой величине.
Однако, для того чтобы использовать эту формулу, мы должны знать среднемесячную доходность, а также стандартное
отклонение. Результат может быть весьма чувствительным к средней ежемесячной доходности в связи с внутренним
асимметричным характером распределения доходностей.

Учитывая, что годовая доходность никак не является суммой, но произведением месячных показателей, то на практике удобно
использовать отклонение логарифма доходности. Тогда умножение на √12 работает.

Альтернативой измерения стандартного отклонения логарифмических доходностей напрямую является расчетный вариант через
значения **S<sub>m</sub>** и **M<sub>m</sub>**. (средняя доходность и стандартное отклонение доходностей). Умножение на
√12 также является правильным методом приведения такой статистики к годовым значениям. Погрешность при этом получается
минимальная.

_Файл в формате EXCEL, где приводятся все вышеуказанные расчеты и формулы, можно загрузить по ссылке ниже._
